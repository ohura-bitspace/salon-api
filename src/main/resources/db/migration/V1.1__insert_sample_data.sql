-- ============================================================
-- 1. サロン（店舗）データの投入
-- ============================================================
-- ID=1: メインの開発用サロン（スタンダードプラン）
-- ID=2: マルチテナント検証用の別サロン（フリープラン）
INSERT INTO salons (id, name, plan_type, is_active) VALUES 
(1, 'Beauty Salon Carnet', 'STANDARD', true),
(2, 'Hair Studio Mock', 'FREE', true);

-- ============================================================
-- 2. スタッフデータの投入
-- ============================================================
-- パスワードは全て 'password' をBCryptでハッシュ化したものです

INSERT INTO staffs (salon_id, name, email, password_hash, role) VALUES 
-- サロン1 (Carnet) のオーナー
(1, '山田 太郎', 'owner@carnet.jp', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', 'OWNER'),
-- サロン1 (Carnet) のスタッフ
(1, '鈴木 花子', 'staff@carnet.jp', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', 'STAFF'),
-- サロン2 (Mock) のオーナー（データ混在チェック用）
(2, '田中 次郎', 'owner@mock.jp', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', 'OWNER');

-- ============================================================
-- 3. 顧客データの投入
-- ============================================================

INSERT INTO customers 
(salon_id, line_user_id, line_display_name, last_name, first_name, last_name_kana, first_name_kana, phone_number, email, admin_memo) 
VALUES 
-- パターンA: LINE連携済み & 顧客情報登録済みの優良顧客 (サロン1)
(1, 'U11111111111111111111111111111111', 'Hanako.S', '佐藤', '花子', 'サトウ', 'ハナコ', '090-1111-2222', 'hanako@example.com', '肌が敏感なので注意。コーヒーが好き。'),

-- パターンB: LINE連携のみ（初回来店前など、詳細情報未登録） (サロン1)
(1, 'U22222222222222222222222222222222', 'Mike_Line', NULL, NULL, NULL, NULL, NULL, NULL, 'LINEから問い合わせあり。'),

-- パターンC: 電話予約のみ（LINE未連携）のアナログ顧客 (サロン1)
(1, NULL, NULL, '鈴木', '一郎', 'スズキ', 'イチロウ', '080-3333-4444', NULL, '電話予約メイン。ガラケー使用。'),

-- パターンD: 別サロンの顧客（サロン1の管理画面に出ないことを確認用） (サロン2)
(2, 'U33333333333333333333333333333333', 'Jiro.T', '田中', '三郎', 'タナカ', 'サブロウ', '090-5555-6666', 'jiro@mock.jp', '別店舗の客');

-- ============================================================
-- 4. メニューデータの投入
-- ============================================================

INSERT INTO menus 
(id, salon_id, title, description, original_price, discounted_price, duration_minutes, item_type, category, tag, display_order, is_active) 
VALUES 
-- --- サロン1 (Carnet) のメニュー ---

-- ID:1 [脱毛] 全身脱毛（メインメニュー）
(1, 1, '全身脱毛（顔・VIO含む）', '最新マシンを使用した全身脱毛コースです。最短60分で完了します。', 
 22000, NULL, 60, 'MENU', 'HAIR_REMOVAL', '人気No.1', 1, true),

-- ID:2 [脱毛] VIOセット（部位メニュー）
(2, 1, 'VIOセット脱毛', 'デリケートゾーンの3点セットです。痛みの少ない施術を心がけています。', 
 8800, NULL, 30, 'MENU', 'HAIR_REMOVAL', NULL, 2, true),

-- ID:3 [クーポン] 初回限定お試し（割引あり）
(3, 1, '【初回限定】全身脱毛お試し', '初めての方限定。カウンセリング込みで安心。', 
 22000, 9800, 90, 'COUPON', 'HAIR_REMOVAL', '初回限定', 0, true),

-- ID:4 [アロマ] リンパマッサージ（カテゴリ違い）
(4, 1, 'アロマリンパマッサージ 60分', 'お好きなアロマオイルを選んでいただき、全身のリンパを流します。', 
 6600, NULL, 60, 'MENU', 'AROMA', '癒やし', 3, true),

-- ID:5 [オプション] シェービング代（オプション扱い）
(5, 1, 'シェービング代（背中・うなじ）', 'ご自身での処理が難しい箇所のシェービングをお手伝いします。', 
 1100, NULL, 15, 'OPTION', 'OTHER', NULL, 99, true),

-- --- サロン2 (Mock) のメニュー ---
-- ID:6 別サロンのメニュー（混在チェック用）
(6, 2, 'カット＆カラー', 'サロン2専用メニュー', 
 12000, NULL, 120, 'MENU', 'OTHER', NULL, 1, true);


-- ============================================================
-- 5. 予約データの投入 (reservations)
-- ============================================================
-- 顧客ID:1=佐藤花子, 2=Mike, 3=鈴木一郎
-- スタッフID:1=山田(Owner), 2=鈴木(Staff)

INSERT INTO reservations 
(id, salon_id, customer_id, staff_id, start_at, end_at, status, total_price, memo) 
VALUES 
-- ID:1 [来店済] 佐藤花子さん / 過去の予約 / スタッフ鈴木担当
(1, 1, 1, 2, '2025-11-01 10:00:00', '2025-11-01 11:30:00', 'VISITED', 9800, '初回のためカウンセリング長めに実施。肌トラブルなし。'),

-- ID:2 [確定] 佐藤花子さん / 未来の予約 / スタッフ山田担当 / 全身＋シェービング
(2, 1, 1, 1, '2025-12-20 14:00:00', '2025-12-20 15:15:00', 'CONFIRMED', 23100, '前回施術後も良好とのこと。'),

-- ID:3 [仮予約] Mikeさん / 未来の予約 / 指名なし(NULL) / VIOのみ
(3, 1, 2, NULL, '2025-12-21 18:00:00', '2025-12-21 18:30:00', 'PENDING', 8800, 'LINEからの仮予約。英語対応が必要かも。'),

-- ID:4 [キャンセル] 鈴木一郎さん / 電話予約だったがキャンセル
(4, 1, 3, 1, '2025-12-15 10:00:00', '2025-12-15 11:00:00', 'CANCELED', 6600, '急な仕事のためキャンセル（電話連絡あり）'),

-- ID:5 [別サロン] 田中三郎さん / サロン2の予約
(5, 2, 4, 3, '2025-12-25 10:00:00', '2025-12-25 12:00:00', 'CONFIRMED', 12000, 'サロン2の予約データ');


-- ============================================================
-- 6. 予約詳細データの投入 (reservation_items)
-- ============================================================
-- どの予約で、どのメニューを選んだか

INSERT INTO reservation_items 
(reservation_id, menu_id, price_at_booking) 
VALUES 
-- 予約ID:1 (佐藤さん・初回) -> メニューID:3 (初回クーポン)
(1, 3, 9800),

-- 予約ID:2 (佐藤さん・2回目) -> メニューID:1 (全身) + ID:5 (シェービング)
(2, 1, 22000),
(2, 5, 1100), -- 複数メニューの登録例

-- 予約ID:3 (Mikeさん) -> メニューID:2 (VIO)
(3, 2, 8800),

-- 予約ID:4 (鈴木一郎さん・キャンセル) -> メニューID:4 (アロマ)
(4, 4, 6600),

-- 予約ID:5 (別サロン) -> メニューID:6 (カット)
(5, 6, 12000);
