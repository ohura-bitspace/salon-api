-- ============================================================
-- 1. サロン（店舗）データの投入
-- ============================================================
-- ID=1: メインの開発用サロン
-- ID=2: お客様の本番サロン
INSERT INTO salons (id, name, plan_type, is_active) VALUES 
(1, 'bit Salon', 'STANDARD', true),
(2, 'salon up-S', 'STANDARD', true);

-- ============================================================
-- 1-1. サロン設定データの投入
-- ============================================================
-- 各サロンの営業時間・定休日・予約枠の設定
-- regular_holidays: 7桁文字列（0=営業、1=休み、月曜始まり）
--   例: "0000011" = 土日休み、"0000000" = 年中無休
INSERT INTO salon_configs (salon_id, opening_time, closing_time, regular_holidays, slot_interval) VALUES
(1, '09:30:00', '21:00:00', '1000000', 30),  -- bit Salon
(2, '10:00:00', '21:00:00', '0000000', 30);  -- salon up-S

-- ============================================================
-- 2. スタッフデータの投入
-- ============================================================
-- パスワードは全て 'password' をBCryptでハッシュ化したものです

-- 認証情報（users）を先に投入
INSERT INTO users (id, name, email, password_hash, is_active, is_system_admin) VALUES
(1, '大浦 智史', 'ohura721@com', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', true, false),
(2, 'YOHEI', 'yohei@mock.jp', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', true, false),
(3, 'YOKO', 'yoko@mock.jp', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', true, false),
(4, 'システム管理者', 'admin@system.jp', '$2a$10$4hInjKtm/Kd.eZf24UBOFOAmgXFyf/ESW0KkpWfQIPhGyn.KExCtK', true, true);

-- 各サロンごとの所属（staffs）を投入
-- (user_id, salon_id, role)
-- システム管理者（user_id=5）は全店舗アクセス可能なため、staffsへの登録は任意
-- ここでは便宜上サロン1に所属として登録
INSERT INTO staffs (user_id, salon_id, role, is_practitioner, is_active) VALUES
(1, 1, 'ADMIN', true, true),
(2, 2, 'ADMIN', false, true),
(3, 2, 'ADMIN', true, true),
(4, 2, 'ADMIN', false, true);

-- ============================================================
-- 3. 顧客データの投入
-- ============================================================

INSERT INTO customers 
(salon_id, line_user_id, line_display_name, last_name, first_name, last_name_kana, first_name_kana, phone_number, email, admin_memo) 
VALUES 
-- パターンA: LINE連携済み & 顧客情報登録済みの優良顧客 (サロン1)
(1, 'U11111111111111111111111111111111', 'Hanako.S', '佐藤', '花子', 'サトウ', 'ハナコ', '090-1111-2222', 'hanako@example.com', '肌が敏感なので注意。コーヒーが好き。'),
-- パターンB: サロン1の管理画面に出ないことを確認用 (サロン2)
(2, 'U33333333333333333333333333333333', 'Jiro.T', '田中', '三郎', 'タナカ', 'サブロウ', '090-5555-6666', 'jiro@mock.jp', 'テスト用の顧客. 削除OK.');

-- ============================================================
-- 4-1. カテゴリマスタのデータ投入 (menu_categories) ★新規追加
-- ============================================================
-- まず「箱（タブ）」を作ります。
INSERT INTO menu_categories 
(id, salon_id, name, display_order) 
VALUES 
-- サロン1 (Carnet) 用カテゴリ
(1, 1, 'マッサージ', 1),

-- サロン2 (salon-up-s) 用カテゴリ
(2, 2, '脱毛', 1),
(3, 2, 'マッサージ', 2);

-- ============================================================
-- 4-1.5. メニューセクションのデータ投入 (menu_sections) ★新規追加
-- ============================================================
INSERT INTO menu_sections
(id, menu_category_id, name, display_order)
VALUES
-- サロン1 (bitSalon)
(1, 1, '全身', 1),

-- サロン2 (salon-up-s)
(2, 2, '脱毛', 1),
(3, 3, 'アロマリンパマッサージ～心地よい香りでリラックス', 1),
(4, 3, 'スクラブトリートメント～角質を落として全身美肌', 2),
(5, 3, 'リンパマッサージ～老廃物を流してむくみ改善', 3),
(6, 3, 'タイ古式マッサージ～骨格改善で根本から解決', 4);

-- ============================================================
-- 4-2. メニューマスタのデータ投入 (menus) 
-- ============================================================
-- categoryカラム(ENUM)を廃止し、menu_category_idに変更しています。

INSERT INTO menus 
(id, salon_id, menu_category_id, menu_section_id, title, description, original_price, discounted_price, duration_minutes, item_type, tag, display_order, is_active) 
VALUES 
-- --- サロン1 (bitSalon) のメニュー ---
(1, 1, 1, 1, 'マッサージ', '最短60分で完了します。', 
 12000, NULL, 60, 'MENU', '人気No.1', 1, true),
(2, 1, 1, 1, 'ヘッドスパ', '極上ヘッドスパ。', 
 9800, NULL, 30, 'MENU', NULL, 2, true),

-- --- サロン2 (salon-up-s) のメニュー ---
-- ▼ クーポン (item_type='COUPON')
-- クーポンもカテゴリID:2 (脱毛) に紐付けておくと、バッジで[脱毛]と表示できます

-- ID:3 全身脱毛クーポン
(3, 2, 2, NULL, '【初回限定】お得クーポン☆全身脱毛', '顔全体/両腕/両脇/胸部/腹部/ヒップ/両脚/背中全体/VIOを全て施術します', 
 28000, 22000, 90, 'COUPON', '新規のみ', 1, true),
-- ID:4 選べる5か所クーポン
(4, 2, 2, NULL, '【初回限定】自由に選べる5か所脱毛', 'ご希望の施術部位を5ヵ所お選び下さい（顔全体/両腕/両脇 など）', 
 19000, 15000, 60, 'COUPON', '新規のみ', 2, true),


-- ▼ 通常メニュー (item_type='MENU')
-- カテゴリID:2 (脱毛) に紐付け

-- ID:5 VIOセット
(5, 2, 2, 2, 'VIOセット ～令和の新常識～', '人気のVIOセットコースです。', 
 6000, NULL, 45, 'MENU', NULL, 10, true),

-- ID:6 Vライン
(6, 2, 2, 2, 'Vライン ～令和の新常識～', NULL, 
 3000, NULL, 30, 'MENU', NULL, 11, true),

-- ID:7 Iライン
(7, 2, 2, 2, 'Iライン ～令和の新常識～', NULL, 
 3000, NULL, 30, 'MENU', NULL, 12, true),

-- ID:8 Oライン
(8, 2, 2, 2, 'Oライン ～令和の新常識～', NULL, 
 3000, NULL, 30, 'MENU', NULL, 13, true),

-- ID:9 男性ヒゲ
(9, 2, 2, 2, '男性ヒゲセット ～毎朝の髭剃りとおさらば～', '男性のお客様限定。毎朝の処理が楽になります。', 
 5000, NULL, 45, 'MENU', 'メンズ', 14, true),
 
(10, 2, 2, 2, '鼻下 ～毎朝の髭剃りとおさらば～', NULL, 
 2000, NULL, 20, 'MENU', 'メンズ', 15, true),
(11, 2, 2, 2, 'アゴ ～毎朝の髭剃りとおさらば～', NULL, 
 2000, NULL, 20, 'MENU', 'メンズ', 16, true),
(12, 2, 2, 2, 'ほほ ～毎朝の髭剃りとおさらば～', NULL,  
 2000, NULL, 20, 'MENU', 'メンズ', 17, true),
(13, 2, 2, 2, '首周り ～毎朝の髭剃りとおさらば～', NULL, 
 2000, NULL, 20, 'MENU', NULL, 18, true),
(14, 2, 2, 2, '両脚 ～憧れのすっきり美脚～', NULL, 
 5000, NULL, 30, 'MENU', NULL, 19, true),
(15, 2, 2, 2, '背中 ～美しさは後ろ姿から～', NULL, 
 5000, NULL, 30, 'MENU', NULL, 20, true),
(16, 2, 2, 2, '女性顔全体 ～化粧のノリが段違い～', NULL, 
 4000, NULL, 30, 'MENU', NULL, 21, true),
(17, 2, 2, 2, '両腕 ～肩から指先までキレイに～', NULL, 
 4000, NULL, 30, 'MENU', NULL, 22, true),
(18, 2, 2, 2, 'ヒップ ～触りたくなるすべすべ美尻に～', NULL, 
 4000, NULL, 30, 'MENU', NULL, 23, true),
(19, 2, 2, 2, '両脇 ～お風呂での処理はもうおしまい～', NULL, 
 3000, NULL, 30, 'MENU', NULL, 24, true),
(20, 2, 2, 2, 'うなじ ～ふとした瞬間ドキッとさせる～', NULL, 
 2000, NULL, 20, 'MENU', NULL, 25, true),
(21, 2, 2, 2, '胸部 ～これであなたもデコルテ美人～', NULL, 
 3000, NULL, 20, 'MENU', NULL, 26, true),
(22, 2, 2, 2, '腹部 ～どんな場面でもカッコ良く～', NULL, 
 3000, NULL, 20, 'MENU', NULL, 27, true),

-- ▼ アロマメニュー
-- カテゴリID:3 (マッサージ) に紐付け
-- 120分
(23, 2, 3, 3, 'アロマリンパマッサージ 120分', 'たっぷりと時間をかけて全身の疲れを癒やします。', 
 17000, NULL, 120, 'MENU', NULL, 21, true),
-- 90分
(24, 2, 3, 3, 'アロマリンパマッサージ 90分', 'スタンダードな90分コースです。', 
 13000, NULL, 90, 'MENU', NULL, 22, true),
-- 60分
(25, 2, 3, 3, 'アロマリンパマッサージ 60分', 'お試しや時間のあいた時に最適な60分コース。', 
 11000, NULL, 60, 'MENU', NULL, 23, true),
 
-- ▼ スクラブメニュー
-- カテゴリID:3 (マッサージ) に紐付け
-- 120分
(26, 2, 3, 4, 'スクラブトリートメント 120分', '全身の古い角質を落としながらすべすべもっちり肌に☆', 
 17000, NULL, 120, 'MENU', NULL, 31, true),
-- 90分
(27, 2, 3, 4, 'スクラブトリートメント 90分', '全身の古い角質を落としながらすべすべもっちり肌に☆', 
 13000, NULL, 90, 'MENU', NULL, 32, true),
-- 60分
(28, 2, 3, 4, 'スクラブトリートメント 60分', '全身の古い角質を落としながらすべすべもっちり肌に☆', 
 11000, NULL, 60, 'MENU', NULL, 33, true),
 
-- ▼ リンパマッサージメニュー
-- カテゴリID:3 (マッサージ) に紐付け
(29, 2, 3, 5, 'リンパマッサージ 120分', 'リンパの流れを促します。むくみ解消で身体もスッキリ♪', 
 14000, NULL, 120, 'MENU', NULL, 41, true),
(30, 2, 3, 5, 'リンパマッサージ 90分', 'リンパの流れを促します。むくみ解消で身体もスッキリ♪', 
 10000, NULL, 90, 'MENU', NULL, 42, true),
(31, 2, 3, 5, 'リンパマッサージ 60分', 'リンパの流れを促します。むくみ解消で身体もスッキリ♪', 
 8000, NULL, 60, 'MENU', NULL, 43, true);

-- ============================================================
-- 4-3. スタッフ提供可能メニューの投入 (staff_available_menus)
-- ============================================================
-- staff_id=1 (サロン1) はメニューID:1,2 を提供可能
-- staff_id=3 (サロン2) はメニューID:3-31 をすべて提供可能
INSERT INTO staff_available_menus (staff_id, menu_id) VALUES
(1, 1),
(1, 2),
(3, 3),
(3, 4),
(3, 5),
(3, 6),
(3, 7),
(3, 8),
(3, 9),
(3, 10),
(3, 11),
(3, 12),
(3, 13),
(3, 14),
(3, 15),
(3, 16),
(3, 17),
(3, 18),
(3, 19),
(3, 20),
(3, 21),
(3, 22),
(3, 23),
(3, 24),
(3, 25),
(3, 26),
(3, 27),
(3, 28),
(3, 29),
(3, 30),
(3, 31);

-- ============================================================
-- 5. 予約データの投入 (reservations)
-- ============================================================
-- ここは変更ありませんが、整合性のため記載します。

INSERT INTO reservations 
(id, salon_id, customer_id, staff_id, start_time, end_time, status, total_price, memo) 
VALUES 
-- ID:1 [来店済] 佐藤花子さん / 過去の予約 / スタッフ鈴木担当
(1, 1, 1, 1, '2025-11-01 10:00:00', '2025-11-01 11:30:00', 'VISITED', 9800, '初回のためカウンセリング長めに実施。肌トラブルなし。');

-- ============================================================
-- 6. 予約詳細データの投入 (reservation_items)
-- ============================================================

INSERT INTO reservation_items 
(reservation_id, menu_id, price_at_booking) 
VALUES 
-- 予約ID:1 (佐藤さん・初回) -> メニューID:2
(1, 2, 9800);
