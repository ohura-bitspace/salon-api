spring.application.name=salon-api

# ==========================================
# 1. データベース接続設定 (MySQL)
# ==========================================
# 末尾のパラメータが重要です（文字化け防止 & タイムゾーン設定）
#spring.datasource.url=jdbc:mysql://localhost:3306/salondb?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Tokyo&useSSL=false&allowPublicKeyRetrieval=true
#spring.datasource.username=root
#spring.datasource.password=root
# 環境変数 SPRING_DATASOURCE_URL があればそれを使い、なければ localhost を使う設定
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/salondb?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Tokyo&useSSL=false&allowPublicKeyRetrieval=true}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:root}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ==========================================
# 2. JPA / Hibernate 設定 (Flywayと共存させるための肝)
# ==========================================
# DB操作のトランザクションをView層まで伸ばさない（予期せぬクエリ発行防止）
spring.jpa.open-in-view=false
#spring.jpa.hibernate.ddl-auto=validate
# 開発中は発行されたSQLをコンソールで見やすく表示する
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# カラム名などをスネークケースに統一 (customerId -> customer_id)
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ==========================================
# 3. Flyway 設定 (DBマイグレーション)
# ==========================================
spring.flyway.enabled=true
# マイグレーション履歴テーブルがない既存DBでもエラーにしない
spring.flyway.baseline-on-migrate=true
# 開発中、あとから V1.1 などを追加しても適用できるようにする
spring.flyway.out-of-order=true
# SQLファイルの場所
spring.flyway.locations=classpath:db/migration

# ==========================================
# 4. その他 (文字コードなど)
# ==========================================
# HTTPリクエスト/レスポンスの文字化け防止
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.force=true

# 認証系、JWT設定
# 開発用なので適当な文字列でOKですが、Base64形式にしておくと本番と同じロジックで動きます
app.jwt.secret=MySuperSecretKeyForSalonAppMustBeVeryLongAndSecureEnoughToWork==
# 7日間
app.jwt.expiration-ms=604800000
#10000
# 604800000

# 顧客向けJWT（新キー。app.jwt.* と同じ値でOK）
jwt.secret=${app.jwt.secret}
jwt.expiration-ms=${app.jwt.expiration-ms}

# ==========================================
# LINE Login（Web）
# ==========================================
line.login.channel-id=2008811709
line.login.channel-secret=208f1f20401ecc7182539d9860e833b6
# フロントのリダイレクトURL許可リスト（オリジン単位、カンマ区切り）
line.login.allowed-redirect-origins=${LINE_ALLOWED_REDIRECT_ORIGINS:http://localhost:5174,https://kandace-icicled-unadmissibly.ngrok-free.dev}
